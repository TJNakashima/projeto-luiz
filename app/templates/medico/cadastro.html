{% extends 'layout.html' %}
{% block title %}Cadastro de Médicos{% endblock %}
{% block content %}
        <form class="form-horizontal">
            <fieldset>

                <!-- Form Name -->
                <legend>Cadastro de cliente</legend>

                {% if mensagem %}
                <div class="alert alert-{{tipo_mensagem}}" role="alert">{{mensagem}}</div>
                {% else %}

                  <!-- Alerta obrigatoriedade -->
                  <div class ="alert-info">Os campos sinalizados com asterisco (*) são obrigatórios.
                  </div><br><br>


                <!-- Text input-->
                <div class="form-group">
                <label class="col-md-4 control-label" for="nome"><strong>* </strong> Nome: </label>  
                    <div class="col-md-6 input-group">
                        <span class="input-group-addon">
                            <span class="glyphicon">&#xe008;</span>
                        </span>
                        <input id="nome" name="nome" type="text" value="{{ model['nome'] }}" placeholder="Informe o nome completo" class="form-control input-md" required="">
                    </div>
                </div>

                <!-- Text input-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="cpf">CPF:</label>  
                    <div class="col-md-2 input-group">
                        <span class="input-group-addon">
                            <span class="glyphicon">&#xe055;</span>
                        </span>
                        <input id="cpf" name="cpf" type="text" value="{{ model['cpf'] }}" placeholder="999.999.999-99" class="form-control input-md" pattern="[0-9]{3}.[0-9]{3}.[0-9]{3}-[0-9]{2}">
                    </div>
                </div>

                <!-- Text input-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="crm"><strong>* </strong> CRM:</label>  
                    <div class="col-md-6 input-group">
                        <span class="input-group-addon">
                            <span class="glyphicon">&#xe055;</span>
                        </span>
                        <input id="crm" name="crm" type="text" value="{{ model['crm'] }}" placeholder="Informe o número do CRM" class="form-control input-md" required="">
                    </div>
                </div>

                <!-- Select Basic -->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="id_especialidade">* Especialidade:</label>
                    <div class="col-md-6 input-group">
                        <span class="input-group-addon">
                            <span class="glyphicon">&#xe139;</span>
                        </span>
                        <input type="text" id="id_especialidade" name="id_especialidade" value="{{ model['id_especialidade'] }}" class="form-control" required="">
                    </div>
                </div>

                <!-- Text input-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="area">Área de atuação:</label>  
                    <div class="col-md-6 input-group">
                        <span class="input-group-addon">
                            <span class="glyphicon">&#xe139;</span>
                        </span>
                        <select id="area" name="area" class="form-control">
                            {% for item in tupla_area %}
                                <option value="{{ item }}"
                                {{ 'selected="selected"' if (item == model['area']) }}
                                >
                                  {{ item }}
                                </option>
                            {% endfor %}
                        </select>
                    </div>
                </div>

                <!-- Text input-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="rua">Endereço:</label>
                    <div class="col-md-6 input-group">
                        <span class="input-group-addon">
                            <span class="glyphicon">&#xe021;</span>
                        </span>
                        <input id="rua" name="rua" type="text" value="{{ model['rua'] }}" placeholder="Informe o nome da rua" class="form-control input-md">
                    </div>
                </div>

                <!-- Text input-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="numero">N°:</label>
                    <div class="col-md-6 input-group">
                        <span class="input-group-addon">
                            <span class="glyphicon">&#xe021;</span>
                        </span>
                        <input id="numero" name="numero" type="text" value="{{ model['numero'] }}" placeholder="Informe o número da casa" class="form-control input-md">
                    </div>
                </div>

                <!-- Text input-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="bairro">Bairro:</label>
                    <div class="col-md-6 input-group">
                        <span class="input-group-addon">
                            <span class="glyphicon">&#xe021;</span>
                        </span>
                        <input id="bairro" name="bairro" type="text" value="{{ model['bairro'] }}" placeholder="Informe o bairro  " class="form-control input-md">
                    </div>
                </div>

                <!-- Select Basic -->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="estado">Estado: </label>
                    <div class="col-md-2 input-group">
                        <span class="input-group-addon">
                            <span class="glyphicon">&#xe021;</span>
                        </span>
                        <select id="estado" name="estado" class="form-control">
                            {% for item in tupla_estado %}
                                <option value="{{ item[0] }}"
                                {{ 'selected="selected"' if (item[0] == model['estado']) }}
                                >
                                  {{ item[1] }}
                                </option>
                            {% endfor %}
                        </select>
                    </div>
                </div>

                <!-- Text input-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="cidade">Cidade:</label>  
                    <div class="col-md-6 input-group">
                        <span class="input-group-addon">
                            <span class="glyphicon">&#xe021;</span>
                        </span>
                        <input id="cidade" name="cidade" type="text" value="{{ model['cidade'] }}" placeholder="Informe o nome da cidade" class="form-control input-md">
                    </div>
                </div>

                <!-- Text input-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="telefone"><strong>* </strong> Telefone:</label>  
                    <div class="col-md-4 input-group">
                        <span class="input-group-addon">
                            <span class="glyphicon">&#xe145;</span>
                        </span>
                        <input id="telefone" name="telefone" type="text" value="{{ model['telefone'] }}" placeholder="(99)99999-9999" class="form-control input-md" required="" pattern="([1-9]{2})[1-9]{5}-[1-9]{4}">
                    </div>
                </div>

                <!-- Select Basic -->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="status">Situação</label>
                    <div class="col-md-4 input-group">
                        <span class="input-group-addon">
                            <span class="glyphicon">&#xe055;</span>
                        </span>
                        <select id="situacao" name="status" class="form-control">
                            {% for item in tupla_status %}
                            <option value="{{ item[0] }}"
                            {{ 'selected="selected"' if (item[0] == model['status']) }}
                            >
                              {{ item[1] }}
                            </option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <!-- Button (Double) -->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="btnSalvar"></label>
                    <div class="col-md-8">
                        <button id="btnSalvar" type="submit" class="btn btn-success">
                        <span class="glyphicon glyphicon-ok"></span>&nbsp;
                        Salvar
                        </button>
                        <a id="btnCancelar" type="button" class="btn btn-danger" href="{{ url_for('medico.index') }}">
                        <span class="glyphicon glyphicon-remove"></span>&nbsp;
                        Cancelar
                        </a>
                    </div>
                </div>
                {% endif %}
            </fieldset>
        </form>
        <script type="text/javascript">
        $("#id_especialidade").selectSearch({
            findSearch:function(search, limit, offset){
                return $.ajax({
                    url : "{{ url_for('especialidade.ajax') }}",
                    dataType : "json",
                    data:'descricao='+search+'&limit='+limit+'&offset='+(limit * offset)
                });
            },
            findById:function(id){
                return $.ajax({
                    url : "{{ url_for('especialidade.ajax_by_id',pk='') }}"+id,
                    dataType : "json"
                });
            },
            getDescription: function(data){
                return data.id+'-'+data.descricao;
            },
            getValue: function(data){
                return data.id;
            },
            hideField:true
        });
      </script>    
{% endblock %}